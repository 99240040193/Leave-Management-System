{% extends "base.html" %}
{% block content %}
<div class="card border-0 shadow-sm glass-card mb-4 mx-auto" style="max-width: 800px;">
    <div class="card-header bg-transparent border-0 d-flex justify-content-between align-items-center mt-2 pb-0">
        <h5 class="mb-0 font-weight-bold">User Details: {{ user.name }}</h5>
        <div>
            {% if current_user.role == 'Admin' %}
            <a href="{{ url_for('admin.users') }}" class="btn btn-sm btn-outline-secondary rounded-pill"><i
                    class="fas fa-arrow-left me-1"></i>Back to Users</a>
            {% else %}
            <a href="{{ url_for('manager.team') }}" class="btn btn-sm btn-outline-secondary rounded-pill"><i
                    class="fas fa-arrow-left me-1"></i>Back to Team</a>
            {% endif %}
        </div>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4 text-center mb-4 mb-md-0 border-end">
                <img src="{{ url_for('static', filename='profile_pics/' + user.profile_photo) }}" alt="Profile"
                    class="rounded-circle shadow-sm mx-auto mb-3 mt-3"
                    style="width: 150px; height: 150px; object-fit: cover;"
                    onerror="this.src='https://ui-avatars.com/api/?name={{ user.name | urlencode }}&background=random&size=150'">
                <h5 class="mb-1 font-weight-bold">{{ user.name }}</h5>
                <p class="text-muted mb-2">{{ user.role }}</p>
                <div class="d-flex justify-content-center px-2 mb-3">
                    {% if user.status == 'Active' %}
                    <span class="badge bg-success rounded-pill mx-1">Active</span>
                    {% elif user.status == 'Pending' %}
                    <span class="badge bg-warning text-dark rounded-pill mx-1">Pending</span>
                    {% else %}
                    <span class="badge bg-secondary rounded-pill mx-1">Inactive</span>
                    {% endif %}
                </div>
            </div>

            <div class="col-md-8 ps-md-4">
                <h6 class="font-weight-bold text-primary mb-3"><i class="fas fa-id-card me-2"></i>Organizational Details
                </h6>
                <div class="row mb-4">
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Department</small>
                        <strong>{{ user.department or 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Stream</small>
                        <strong>{{ user.stream or 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Batch</small>
                        <strong>{{ user.batch or 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Manager</small>
                        <strong>{{ user.manager.name if user.manager else 'None' }}</strong>
                    </div>
                </div>

                <h6 class="font-weight-bold text-primary mb-3"><i class="fas fa-user mb-2 me-2"></i>Personal Details
                </h6>
                <div class="row">
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Email</small>
                        <strong><a href="mailto:{{ user.email }}" class="text-decoration-none text-dark">{{ user.email
                                }}</a></strong>
                    </div>
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Phone</small>
                        <strong>{{ user.phone or 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Gender</small>
                        <strong>{{ user.gender or 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-6 mb-2">
                        <small class="text-muted d-block">Date of Birth</small>
                        <strong>{{ user.dob.strftime('%b %d, %Y') if user.dob else 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-12 mb-2">
                        <small class="text-muted d-block">Address</small>
                        <strong>{{ user.address or 'N/A' }}</strong>
                    </div>
                    <div class="col-sm-6 mt-3">
                        <div class="p-3 bg-light rounded-3 border-start border-4 border-danger">
                            <small class="text-danger font-weight-bold d-block mb-1"><i
                                    class="fas fa-heartbeat me-1"></i>Emergency Contact</small>
                            <strong>{{ user.emergency_contact or 'Not provided' }}</strong>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}